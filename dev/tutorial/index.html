<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Tutorial · MPSGE.jl</title><meta name="title" content="Tutorial · MPSGE.jl"/><meta property="og:title" content="Tutorial · MPSGE.jl"/><meta property="twitter:title" content="Tutorial · MPSGE.jl"/><meta name="description" content="Documentation for MPSGE.jl."/><meta property="og:description" content="Documentation for MPSGE.jl."/><meta property="twitter:description" content="Documentation for MPSGE.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">MPSGE.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Tutorial</a><ul class="internal"><li><a class="tocitem" href="#Store-the-model-elements-ready-for-build-by-adding-them"><span>Store the model elements ready for build by adding them</span></a></li><li><a class="tocitem" href="#Check-the-benchmark-solution"><span>Check the benchmark solution</span></a></li><li><a class="tocitem" href="#See-the-underlying-model-equations"><span>See the underlying model equations</span></a></li><li><a class="tocitem" href="#Run-Counterfactuals"><span>Run Counterfactuals</span></a></li></ul></li><li><a class="tocitem" href="../howtoguides/">How-to Guides</a></li><li><a class="tocitem" href="../explanation/">Explanation and Discussion</a></li><li><a class="tocitem" href="../reference/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Tutorial</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Tutorial</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/anthofflab/MPSGE.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/anthofflab/MPSGE.jl/blob/main/docs/src/tutorial.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Tutorial-1:-basics"><a class="docs-heading-anchor" href="#Tutorial-1:-basics">Tutorial 1: basics</a><a id="Tutorial-1:-basics-1"></a><a class="docs-heading-anchor-permalink" href="#Tutorial-1:-basics" title="Permalink"></a></h1><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>This tutorial assumes you have </p><ul><li>installed Julia, for example from <a href="https://apps.microsoft.com/store/detail/julia/9NJNWW8PVKMN?hl=en-us&amp;gl=us&amp;rtc=1">here</a>, or <a href="https://julialang.org/downloads/">here</a>, and</li><li><a href="https://anthofflab.berkeley.edu/MPSGE.jl/dev/">installed</a> the MPSGE package, </li><li>have some kind of source-code editor/Integrated Development Environment (IDE), for example the free <a href="https://code.visualstudio.com/">VS Code</a>, with the <a href="https://github.com/julia-vscode/julia-vscode#installing-juliavs-codevs-code-julia-extension">julia Language Support extension</a> also recommended, or otherwise are able to run Julia code, </li><li>have a basic understanding of <a href="https://docs.julialang.org/en/v1/manual/getting-started/">Julia syntax</a>, and</li><li>have a <a href="../explanation/">general understanding of CGE and the MPSGE structure</a>.</li></ul></div></div><p>This first tutorial follows the first section in <a href="https://github.com/anthofflab/MPSGE.jl/blob/main/examples/example1.jl">example 1</a> from our code repository, which is an edited translation of the <a href="https://www.gams.com/latest/docs/UG_MPSGE_Intro.html#UG_MPSGE_Intro_Appendix_twobytwo">simple 2x2 example model</a> from the GAMS MPSGE documentation.</p><h6 id><a class="docs-heading-anchor" href="#"></a><a id="-1"></a><a class="docs-heading-anchor-permalink" href="#" title="Permalink"></a></h6><p>You can run the commands line-by-line wherever you run Julia code, or all together as a .jl script, either transcribing, or copying and pasting from here, or <a href="https://github.com/anthofflab/MPSGE.jl/blob/main/examples/example1.jl">example 1</a>.  </p><h5 id="Activate-the-package-with"><a class="docs-heading-anchor" href="#Activate-the-package-with">Activate the package with</a><a id="Activate-the-package-with-1"></a><a class="docs-heading-anchor-permalink" href="#Activate-the-package-with" title="Permalink"></a></h5><pre><code class="language-julia-repl hljs">julia&gt;using MPSGE</code></pre><p>Start by naming the model using any Julia-legal variable name, without spaces etc. The Julia style guide suggests lower case for variable names.</p><pre><code class="language-julia-repl hljs">m = Model()</code></pre><h2 id="Store-the-model-elements-ready-for-build-by-adding-them"><a class="docs-heading-anchor" href="#Store-the-model-elements-ready-for-build-by-adding-them">Store the model elements ready for build by adding them</a><a id="Store-the-model-elements-ready-for-build-by-adding-them-1"></a><a class="docs-heading-anchor-permalink" href="#Store-the-model-elements-ready-for-build-by-adding-them" title="Permalink"></a></h2><p>As in the <a href="../explanation/">overview explanation</a>, each model will have a number on elements. We store all those elements in the named model, and then we can test, solve, alter, print, re-solve e.t.c.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><ul><li>Scalar values and arrays can be used to provide values for data and parameters such as elasticities, but cannot be tracked or changed within the model and counterfactuals, so any value that needs to be updated should be added as a model Parameter.</li><li>After being defined, asimmediately below, in order to access model Parameters within other model elements, they must be part of expressions (like a sentence of code). So, for referencing the value of <code>sub_elas_x</code>, it must be within an evaluated expression, like  </li><li><pre><code class="nohighlight hljs">:(1 * $sub_elas_x)</code></pre>including being multiplied by a scalar, or in some other equation, rather than just <code>sub_elas_x</code> </li><li>The model can be built in any order, so long as all elements referred to have been previously defined. For that reason a standard structure is: load the data, scalars, indexes; add model parameters, sectors, commodities, auxiliary variables, and consumers; add production and demand functions, and auxilliary constraint equations.</li><li>Extra spaces after commas or opening parenthesis aren&#39;t a problem in Julia, so can we align parallel elements - for instance the elements of the 3 Parameters immediately below - to help readability.</li></ul></div></div><h3 id="Add-Parameters"><a class="docs-heading-anchor" href="#Add-Parameters">Add Parameters</a><a id="Add-Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Add-Parameters" title="Permalink"></a></h3><p>We&#39;ll start by defining 6 Paramters, and giving them a value. Each is just a name with a number attached, but defining them within the model as Parameters, instead of just using the numbers, or a Julia variables, allows us to update those values for future runs/solves or the model.</p><pre><code class="language-julia hljs"># Adding a Parameter with the optional description
sub_elas_x    = add!(m, Parameter(:sub_elas_x,    value=1.5, description=&quot;Substitution elasticity between labor and kapital in sector X&quot;))
# Adding Parameters without the optional description
sub_elas_y    = add!(m, Parameter(:sub_elas_y,    value=2.))
transf_elas_x = add!(m, Parameter(:transf_elas_x, value=0.))</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>There is a &#39;functional&#39; and macro version (begninning with @) for all model definition elements. The macro versions <em>may</em> lag in terms of incorporating all elements while the package is still in development. We show examples of both versions here as part of this tutorial, they are equivalent.</p></div></div><h4 id="The-macro-version-for-adding-Parameters"><a class="docs-heading-anchor" href="#The-macro-version-for-adding-Parameters">The macro version for adding Parameters</a><a id="The-macro-version-for-adding-Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#The-macro-version-for-adding-Parameters" title="Permalink"></a></h4><pre><code class="language-julia hljs">@parameter(m, sub_elas_u,    0.5)
@parameter(m, transf_elas_y, 0.,  description=&quot;Transformation Elasticity for sector Y, actually irrelevant because there&#39;s only 1 output&quot;)
@parameter(m, endow, value = 1.0)</code></pre><h3 id="Add-Commodities"><a class="docs-heading-anchor" href="#Add-Commodities">Add Commodities</a><a id="Add-Commodities-1"></a><a class="docs-heading-anchor-permalink" href="#Add-Commodities" title="Permalink"></a></h3><p>Commodities are one of the basic elements in an MPSGE model, they are produced by sectors/firms, factors used in the production of other commodities, or both. Here again, we show both the &#39;functional&#39; and macro versions for adding these elements, with and without the options of a description, or a &#39;benchmark&#39; price. The default benchmark price is 1. To set a different price or to articulately set it as 1, use the keyword <code>benchmark=</code>, and similarly, to include an optional description, use the keyword <code>description=</code>, as below.</p><pre><code class="language-julia hljs">PX = add!(m, Commodity(:PX))
PY = add!(m, Commodity(:PY, benchmark=1.))
PU = add!(m, Commodity(:PU, description=&quot;The Utility Commodity&quot;))
# The macro version
@commodity(m,           PL, description=&quot;wage: the price of labour&quot;)
@commodity(m,           PK, benchmark=1.)</code></pre><h3 id="Add-Sectors"><a class="docs-heading-anchor" href="#Add-Sectors">Add Sectors</a><a id="Add-Sectors-1"></a><a class="docs-heading-anchor-permalink" href="#Add-Sectors" title="Permalink"></a></h3><p>Sectors use commodities (Inputs), and generate commodities (Outputs).</p><pre><code class="language-julia hljs">X = add!(m, Sector(:X))
@sector(m,  Y)
@sector(m,  U, description=&quot;Sector U: This &#39;sector&#39; uses the two produced goods to generate utility&quot;)</code></pre><h3 id="Add-a-Consumer"><a class="docs-heading-anchor" href="#Add-a-Consumer">Add a Consumer</a><a id="Add-a-Consumer-1"></a><a class="docs-heading-anchor-permalink" href="#Add-a-Consumer" title="Permalink"></a></h3><p>For Consumers in the model the benchmark value is important. In the benchmark callibration of the model, this value will be the sum of endowments, plus the value of any taxes transferred to the consumer.</p><pre><code class="language-julia hljs">@consumer(m, RA, benchmark = 150., description=&quot;Representative Agent&quot;)</code></pre><h3 id="Add-Production-Functions"><a class="docs-heading-anchor" href="#Add-Production-Functions">Add Production Functions</a><a id="Add-Production-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Add-Production-Functions" title="Permalink"></a></h3><p>Here we define a production function for every sector/firm. That is:</p><ul><li>what commodities are used by the sector and in what quantities,</li><li>what commodities are produced by the sector and in what quantities,</li><li>how interchangeable are the inputs (substitution elasticities)</li><li>how interchangeable are the outputs (transformation elasticities),</li><li>what taxes are paid, if any, and</li><li>what price per unit of each commodity (default is 1. for all commodities as is standard the convention for CGE models)</li></ul><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Outputs and Inputs are within <code>[]</code> Arrays, even if there is only one.  Outputs must always be first.</p><ul><li>Production Functions don&#39;t need names assigned (that is, we don&#39;t have <strong>X =</strong> <code>add!(m, Production(...))</code>, just <code>add!(m, Production(...))</code>) bc they are named by the sector.</li></ul></div></div><pre><code class="language-julia hljs">add!(m, Production(X, :($transf_elas_x*1.), :($sub_elas_x*1.), [Output(PX, 100)], [Input(PL, 50),  Input(PK, 50)]))
@production(m,     Y, :($transf_elas_y*1.), :($sub_elas_y*1.), [Output(PY, 50)],  [Input(PL, 20),  Input(PK, 30)])
@production(m,     U, 0,                    :($sub_elas_u*1.), [Output(PU, 150)], [Input(PX, 100), Input(PY, 50)])</code></pre><h3 id="Add-Demand-Functions"><a class="docs-heading-anchor" href="#Add-Demand-Functions">Add Demand Functions</a><a id="Add-Demand-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Add-Demand-Functions" title="Permalink"></a></h3><p>The Demand function defines the basic supplies that enter our modelled economy (endowments),  which come from &#39;consumers&#39;, and their final consumption. Final consumption is the end point of a commodity&#39;s production cycle, as the name suggests. Commodities demanded are assumed to be consumeed at that point, or at least kept, and and not used in any production in the modelled part of the economy Consumers can be households, governments, or other agents. In the benchmark callibration of a model, the total value of the consumers contributions (endowments) must equal the value of their total demands.</p><pre><code class="nohighlight hljs">@demand(m, RA, 1., [Demand(PU, 150)], [Endowment(PL, :(70 * $endow)), Endowment(PK, 80.)])</code></pre><h2 id="Check-the-benchmark-solution"><a class="docs-heading-anchor" href="#Check-the-benchmark-solution">Check the benchmark solution</a><a id="Check-the-benchmark-solution-1"></a><a class="docs-heading-anchor-permalink" href="#Check-the-benchmark-solution" title="Permalink"></a></h2><p>After the model is established and saved under the model name, it is important to check that the model is mathematically balanced in the benchmark by solving with 0 iterations. This will only solve if all elements of the model are in balance, that is:</p><ul><li>total supply of each commodity = its total demand</li><li>the value of the inputs for each sector and consumer = their outputs</li><li>the value of all inputs in each sector = the value of all the sector&#39;s outputs.</li></ul><pre><code class="nohighlight hljs">solve!(m, cumulative_iteration_limit=0)</code></pre><p>If the model solves with zero iterations, we know that the model and data are balanced and callibrated in the benchmark.      If not, you will get the error  <code>Did not solve with error: CumulativeMinorIterationLimit.</code>  </p><div class="admonition is-success"><header class="admonition-header">Tip</header><div class="admonition-body"><p>The <code>Major Iteration Log</code> from PATH will display the variable(s), preceded by &quot;F_&quot; <code>(label)</code> with the largest marginal value, that is the variables that have the <code>residual</code> solved value or <code>inorm</code>that is larger than the tolerance set, which can be useful for troubleshooting.   You can also run <code>solve!(m)</code> without the iteration limit and examine the values for all variables for more clues as to where the benchmark may be unbalanced.</p></div></div><h2 id="See-the-underlying-model-equations"><a class="docs-heading-anchor" href="#See-the-underlying-model-equations">See the underlying model equations</a><a id="See-the-underlying-model-equations-1"></a><a class="docs-heading-anchor-permalink" href="#See-the-underlying-model-equations" title="Permalink"></a></h2><p>You can print all the equations and their associated variables.</p><pre><code class="nohighlight hljs">algebraic_version(m)</code></pre><h2 id="Run-Counterfactuals"><a class="docs-heading-anchor" href="#Run-Counterfactuals">Run Counterfactuals</a><a id="Run-Counterfactuals-1"></a><a class="docs-heading-anchor-permalink" href="#Run-Counterfactuals" title="Permalink"></a></h2><p>Once the benchmark is established, update variable values and/or parameters, fix or unfix variables etc. and see the solution as in the simulated counterfactual scenario.</p><h6 id="Example:-Increase-labor-endowment-by-10%"><a class="docs-heading-anchor" href="#Example:-Increase-labor-endowment-by-10%">Example: Increase labor endowment by 10%</a><a id="Example:-Increase-labor-endowment-by-10%-1"></a><a class="docs-heading-anchor-permalink" href="#Example:-Increase-labor-endowment-by-10%" title="Permalink"></a></h6><p>We used the paramater we called <code>endow</code>, initially set at a value of 1.0, to enable us to alter the total amount/value of the endowments of labour and see its effect on our toy economy. By setting the value of <code>endow</code> as 10% higher, at 1.1, we alter the model to increase the amount of labour in this economy by 10%.</p><pre><code class="language-julia hljs">set_value(endow, 1.1)</code></pre><h6 id="And-set-the-consumer-RA-as-the-numeraire"><a class="docs-heading-anchor" href="#And-set-the-consumer-RA-as-the-numeraire">And set the consumer RA as the numeraire</a><a id="And-set-the-consumer-RA-as-the-numeraire-1"></a><a class="docs-heading-anchor-permalink" href="#And-set-the-consumer-RA-as-the-numeraire" title="Permalink"></a></h6><p>Because all the changes in our results are relative, it is usually useful to select a variable to serve as the &#39;numeraire&#39;, that is, a variable whose value is fixed and set such that all the other changes can be interpreted in relative terms to that variable.</p><pre><code class="language-julia hljs">set_fixed!(RA, true)
solve!(m)</code></pre><p>Or we can look at the results relative to the price of the commodity PX.</p><pre><code class="language-julia hljs">set_fixed!(RA, false)
set_fixed!(PX, true)
solve!(m)</code></pre><p>Or we can look at the results relative to wages, the price of labour in our toy economy.</p><pre><code class="language-julia hljs">set_fixed!(PX, false)
set_fixed!(PL, true)
solve!(m)</code></pre><p>Or here we test the impact of different set of assumptions about how interchangeable kapital and labour are in the X and Y sectors.</p><pre><code class="language-julia hljs"># Re-running with non-1 elasticities of substitution, non-Cobb-Douglas forms for production in the cost function
set_value(sub_elas_x, 0.5)
set_value(sub_elas_y, 0.6)
set_fixed!(RA, true)
solve!(m)

set_fixed!(PX, true)
set_fixed!(RA, false)
solve!(m)

set_fixed!(PX, false)
set_fixed!(PL, true)
solve!(m)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../howtoguides/">How-to Guides »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Thursday 14 March 2024 20:40">Thursday 14 March 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
